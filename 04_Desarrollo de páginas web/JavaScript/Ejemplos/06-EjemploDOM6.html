<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Usuarios</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" />
    <style>
        .avatar {
            width: 25px;
            height: 25px;
            border-radius: 50%;
        }
    </style>
</head>

<body>
    <div class="container mt-4">
        <h1>Chat</h1>
        <div class="row">
            <div class="col-2">
                <ul class="list-group" id="listaUsuarios">

                </ul>
            </div>

            <div class="col">
                <ul class="list-group" id="listaMensajes">
                    <!-- <li class="list-group-item">
                        <p class="h6">Miguel <span>( 23/04/2023 03:45:00)</span></p>
                        <p>Hola Buenos días</p>
                    </li> -->

                    <!-- <li class="list-group-item d-flex justify-content-between align-items-center">
                        <p class="h6">Miguel <span>( 23/04/2023 03:45:00)</span></p>
                        <p>Hola Buenos días</p>
                    
                      </li> -->
                </ul>
            </div>
        </div>
    </div>

    <script>
        const usuarios = [
            { nombre: 'Juan Luis', avatar: 'https://cdn-icons-png.flaticon.com/512/4792/4792929.png' },
            { nombre: 'Miguel', avatar: 'https://cdn-icons-png.flaticon.com/512/5953/5953811.png' },
            { nombre: 'Iñaki', avatar: 'https://cdn-icons-png.flaticon.com/256/5953/5953714.png' }
        ];

        const mensajes = [
            { usuario: 'Miguel', texto: 'Hola Buenos días', fecha: '23/04/2023', horaPubli: '03:45:00' },
            { usuario: 'Juan Luis', texto: 'querrás decir noches....', fecha: '23/04/2023', horaPubli: '04:15:25' },
            { usuario: 'Iñaki', texto: '¿Quién se ha muerto?', fecha: '23/04/2023', horaPubli: '05:03:12' }
        ];

        const listaUsuarios = document.querySelector('#listaUsuarios');
        usuarios.forEach(x => {
            const nuevoUsuario = document.createElement('li');
            nuevoUsuario.addEventListener('click',()=>filtrarMensajes(x));
            nuevoUsuario.classList.add('list-group-item');
            const nombreUsuario = document.createElement('span');
            nombreUsuario.textContent = x.nombre;
            nombreUsuario.classList.add('ms-2');
            const avatar = document.createElement('img');
            avatar.src = x.avatar;
            avatar.alt = "Avatar de " + x.nombre;
            avatar.classList.add('avatar');
            nuevoUsuario.appendChild(avatar);
            nuevoUsuario.appendChild(nombreUsuario);
            listaUsuarios.appendChild(nuevoUsuario);
        });

        function filtrarMensajes(usuario) {
            const listaMensaje = document.querySelector('#listaMensajes');
            listaMensaje.innerHTML='';
            mensajes.forEach(x => {
            if (usuario.nombre==x.usuario){
                const nuevoMensaje = document.createElement('li');
                nuevoMensaje.classList.add('list-group-item');
                const nuevoSpan = document.createElement('span');
                nuevoSpan.classList.add('badge');
                nuevoSpan.classList.add('bg-primary');
                nuevoSpan.classList.add('rounded-pill');
                nuevoSpan.classList.add('float-end');
                nuevoSpan.textContent = " " + x.fecha + " " + x.horaPubli ;

                const nuevoParrafo = document.createElement('p');
                nuevoParrafo.textContent = x.usuario;
                nuevoParrafo.classList.add('h6');
                nuevoParrafo.appendChild(nuevoSpan);
                
                const nuevoTexto = document.createElement('p');
                nuevoTexto.textContent =x.texto;
                nuevoTexto.classList.add('lead');
                nuevoMensaje.appendChild(nuevoParrafo);
                nuevoMensaje.appendChild(nuevoTexto);
                listaMensaje.appendChild(nuevoMensaje);
            }
        });
    }

    </script>
</body>

</html>